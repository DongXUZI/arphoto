<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>æ¯•ä¸šç…§æ‰“å¡</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      text-align: center;
      overflow: hidden;
    }
    video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transform: scaleX(-1); /* é•œåƒå‰ç½®æ‘„åƒå¤´ */
    }
    #cap {
      position: absolute;
      top: 8%;
      left: 50%;
      transform: translateX(-50%);
      font-size: 360px;
      z-index: 2;
      pointer-events: none;
    }
    #btn {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 14px 30px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: #fff;
      color: #000;
      text-decoration: none;
      z-index: 3;
    }
  </style>
</head>
<body>
  <video id="v" autoplay playsinline></video>
  <div id="cap">ğŸ“</div>
  <a id="btn">ğŸ“¸ æ‹ç…§</a>
  <script>
    const v = document.getElementById('v');
    const btn = document.getElementById('btn');

    navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } })
      .then(s => v.srcObject = s)
      .catch(e => alert('æ— æ³•è®¿é—®æ‘„åƒå¤´ï¼š' + e.message));

    btn.onclick = () => {
      const c = document.createElement('canvas');
      c.width = v.videoWidth;
      c.height = v.videoHeight;
      const ctx = c.getContext('2d');

      // é•œåƒç¿»è½¬æ‘„åƒå¤´å›¾åƒ
      ctx.translate(c.width, 0);
      ctx.scale(-1, 1);
      ctx.drawImage(v, 0, 0, c.width, c.height);

      // é‡ç½®å˜æ¢ç”¨äº emoji è´´å›¾
      ctx.setTransform(1, 0, 0, 1, 0, 0);
      ctx.font = "360px sans-serif";
      ctx.textAlign = "center";
      ctx.fillText("ğŸ“", c.width / 2, c.height * 0.56); // è¡¨æƒ…å¸½å­ä½ç½®

      // è¾“å‡ºç…§ç‰‡å¹¶ä¸‹è½½
      const url = c.toDataURL('image/jpeg');
      btn.href = url;
      btn.download = 'arphoto.jpg';
      btn.innerText = 'â¬‡ ä¸‹è½½ç…§ç‰‡';
    };
  </script>
</body>
</html>
